{"ast":null,"code":"var _jsxFileName = \"/home/irotech/Desktop/mernProjects/foodViram/frontend/src/auth/Forgot_Pass.js\";\nimport React, { useState } from 'react';\nimport Base from '../re_usable/Base';\nimport { Redirect } from 'react-router-dom';\nimport { fogortpass, veifyotp, changepass } from './helper/auth_helper';\nexport default function Forgot_Pass() {\n  const [values, setValue] = useState({\n    email: \"\",\n    otp: \"\",\n    newpass: \"\",\n    error: \"\",\n    success: false,\n    otpSend: false,\n    otpVerified: false,\n    isLoading: false,\n    didRedirect: false\n  });\n  const {\n    email,\n    otp,\n    newpass,\n    success,\n    error,\n    otpSend,\n    otpVerified,\n    isLoading,\n    didRedirect\n  } = values;\n\n  const handleChange = field => event => {\n    setValue({ ...values,\n      success: false,\n      error: false,\n      [field]: event.target.value\n    });\n  };\n\n  const performRedirect = () => {\n    if (didRedirect) {\n      return /*#__PURE__*/React.createElement(Redirect, {\n        to: \"/\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 27,\n          columnNumber: 20\n        }\n      });\n    }\n  };\n\n  const listen = () => {\n    setValue({ ...values,\n      success: false\n    });\n  };\n\n  const loadingMsg = () => {\n    return isLoading && /*#__PURE__*/React.createElement(\"div\", {\n      className: \"row\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 38,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-md-6 offset-sm-3 text-left\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 39,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"alert alert-info text-center\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 40,\n        columnNumber: 25\n      }\n    }, \"Loading...\")));\n  };\n\n  const successMsg = () => {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"row\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 51,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-md-6 offset-sm-3 text-left\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 52,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      style: {\n        display: success ? \"\" : \"none\"\n      },\n      className: \"alert alert-success text-center\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 53,\n        columnNumber: 21\n      }\n    }, JSON.stringify(success))));\n  };\n\n  const errorMsg = () => {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"row\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 64,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-md-6 offset-sm-3 text-left\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 65,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      style: {\n        display: error ? \"\" : \"none\"\n      },\n      className: \"alert alert-danger text-center\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 66,\n        columnNumber: 21\n      }\n    }, JSON.stringify(error))));\n  };\n\n  const sendOTPForm = () => {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"row\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 78,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-md-6 text-left offset-sm-3\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 79,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"form\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 80,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"form-group\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 81,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 82,\n        columnNumber: 29\n      }\n    }, \"Email\"), /*#__PURE__*/React.createElement(\"input\", {\n      value: email,\n      onChange: handleChange(\"email\"),\n      type: \"email\",\n      className: \"form-control\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 83,\n        columnNumber: 29\n      }\n    })), /*#__PURE__*/React.createElement(\"button\", {\n      onClick: onSubmitEmail,\n      className: \"btn btn-success btn-block\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 85,\n        columnNumber: 25\n      }\n    }, \"Send OTP\"))));\n  };\n\n  const otpVerifyForm = () => {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"row\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 94,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-md-6 text-left offset-sm-3\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 95,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"form\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 96,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"form-group\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 97,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 98,\n        columnNumber: 29\n      }\n    }, \"OTP\"), /*#__PURE__*/React.createElement(\"input\", {\n      value: otp,\n      onClick: listen,\n      onChange: handleChange(\"otp\"),\n      type: \"text\",\n      className: \"form-control\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 99,\n        columnNumber: 29\n      }\n    })), /*#__PURE__*/React.createElement(\"button\", {\n      onClick: onSubmitOTP,\n      className: \"btn btn-success btn-block mb-2\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 101,\n        columnNumber: 25\n      }\n    }, \"Verify OTP\"), /*#__PURE__*/React.createElement(\"button\", {\n      onClick: onResendOTP,\n      className: \"btn btn-primary btn-block\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 102,\n        columnNumber: 25\n      }\n    }, \"Resend OTP\"))));\n  };\n\n  const changePassForm = () => {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"row\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 111,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-md-6 text-left offset-sm-3\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 112,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"form\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 113,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"form-group\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 114,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 115,\n        columnNumber: 29\n      }\n    }, \"New Password\"), /*#__PURE__*/React.createElement(\"input\", {\n      value: newpass,\n      onClick: listen,\n      onChange: handleChange(\"newpass\"),\n      type: \"text\",\n      className: \"form-control\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 116,\n        columnNumber: 29\n      }\n    })), /*#__PURE__*/React.createElement(\"button\", {\n      onClick: onPassChange,\n      className: \"btn btn-success btn-block\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 118,\n        columnNumber: 25\n      }\n    }, \"Change Password\"))));\n  };\n\n  const onSubmitEmail = event => {\n    event.preventDefault();\n    setValue({ ...values,\n      error: false,\n      isLoading: true\n    });\n    fogortpass({\n      email\n    }).then(responce => {\n      if (responce.err) {\n        setValue({ ...values,\n          error: responce.err,\n          success: false,\n          isLoading: false\n        });\n      } else {\n        setValue({ ...values,\n          error: false,\n          success: \"OTP Send To Your Email!\",\n          otpSend: true,\n          isLoading: false\n        });\n      }\n    }).catch(err => {\n      console.log('Failed to send forget reuest');\n    });\n  };\n\n  const onSubmitOTP = event => {\n    event.preventDefault();\n    setValue({ ...values,\n      error: false,\n      success: false,\n      isLoading: true\n    });\n    veifyotp({\n      email,\n      otp\n    }).then(responce => {\n      if (responce.err) {\n        setValue({ ...values,\n          error: responce.err,\n          isLoading: false\n        });\n      } else {\n        setValue({ ...values,\n          error: \"\",\n          success: \"OTP Varified!\",\n          isLoading: false,\n          otpVerified: true\n        });\n      }\n    }).catch(err => {\n      console.log('Faild to send otp verify request');\n    });\n  };\n\n  const onResendOTP = event => {\n    event.preventDefault();\n    setValue({ ...values,\n      email: \"\",\n      otp: \"\",\n      error: false,\n      success: false,\n      isLoading: false,\n      otpSend: false,\n      otpVerified: false\n    });\n  };\n\n  const onPassChange = event => {\n    event.preventDefault();\n    setValue({ ...values,\n      error: false,\n      success: false,\n      isLoading: true\n    });\n    changepass({\n      email,\n      newpass\n    }, otp).then(responce => {\n      if (responce.err) {\n        setValue({ ...values,\n          error: responce.err,\n          isLoading: false\n        });\n      } else {\n        setValue({ ...values,\n          success: \"Your Password Change Successfully\",\n          email: \"\",\n          otp: \"\",\n          newpass: \"\",\n          error: false,\n          isLoading: false,\n          otpSend: false,\n          otpVerified: false,\n          didRedirect: true\n        });\n      }\n    }).catch(err => {\n      console.log('Failed to send password change request!');\n    });\n  };\n\n  return !otpVerified ? !otpSend ? /*#__PURE__*/React.createElement(Base, {\n    title: \"Forgot Password\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 210,\n      columnNumber: 13\n    }\n  }, loadingMsg(), successMsg(), errorMsg(), sendOTPForm()) : /*#__PURE__*/React.createElement(Base, {\n    title: \"Forgot Password\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 218,\n      columnNumber: 13\n    }\n  }, loadingMsg(), successMsg(), errorMsg(), otpVerifyForm()) : /*#__PURE__*/React.createElement(Base, {\n    title: \"Forgot Password\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 226,\n      columnNumber: 9\n    }\n  }, loadingMsg(), successMsg(), errorMsg(), changePassForm(), performRedirect());\n}","map":{"version":3,"sources":["/home/irotech/Desktop/mernProjects/foodViram/frontend/src/auth/Forgot_Pass.js"],"names":["React","useState","Base","Redirect","fogortpass","veifyotp","changepass","Forgot_Pass","values","setValue","email","otp","newpass","error","success","otpSend","otpVerified","isLoading","didRedirect","handleChange","field","event","target","value","performRedirect","listen","loadingMsg","successMsg","display","JSON","stringify","errorMsg","sendOTPForm","onSubmitEmail","otpVerifyForm","onSubmitOTP","onResendOTP","changePassForm","onPassChange","preventDefault","then","responce","err","catch","console","log"],"mappings":"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","sourcesContent":["import React, { useState } from 'react'\nimport Base from '../re_usable/Base'\nimport { Redirect } from 'react-router-dom'\nimport {fogortpass,veifyotp,changepass} from './helper/auth_helper'\n\nexport default function Forgot_Pass() {\n    const [values,setValue] = useState({\n        email:\"\",\n        otp:\"\",\n        newpass:\"\",\n        error:\"\",\n        success:false,\n        otpSend:false,\n        otpVerified:false,\n        isLoading:false,\n        didRedirect:false,\n    })\n\n    const {email,otp,newpass,success,error,otpSend,otpVerified,isLoading,didRedirect}=values\n\n    const handleChange =(field)=>(event)=>{\n        setValue({...values,success:false,error:false,[field]:event.target.value})\n    }\n\n    const performRedirect = ()=>{\n        if(didRedirect){\n            return <Redirect to=\"/\" />\n        }\n    }\n\n    const listen=()=>{\n        setValue({...values,success:false});\n    }\n\n    const loadingMsg =()=>{\n        return (\n            isLoading && (\n                <div className=\"row\">\n                    <div className=\"col-md-6 offset-sm-3 text-left\">\n                        <div className=\"alert alert-info text-center\">\n                            Loading...\n                        </div>\n                    </div>\n                </div>\n            )\n        )\n    }\n\n    const successMsg =()=>{\n        return (\n            <div className=\"row\">\n                <div className=\"col-md-6 offset-sm-3 text-left\">\n                    <div \n                    style={{display: success ? \"\" :\"none\" }}\n                    className=\"alert alert-success text-center\">\n                        {JSON.stringify(success)}\n                    </div>\n                </div>\n            </div>\n        )\n    }\n    const errorMsg = ()=>{\n        return (\n            <div className=\"row\">\n                <div className=\"col-md-6 offset-sm-3 text-left\">\n                    <div \n                    style={{display: error ? \"\" :\"none\" }}\n                    className=\"alert alert-danger text-center\">\n                        {JSON.stringify(error)}\n                    </div>\n                </div>\n            </div>\n        )\n    }\n\n    const sendOTPForm= ()=>{\n        return (\n            <div className=\"row\">\n                <div className=\"col-md-6 text-left offset-sm-3\">\n                    <form>\n                        <div className=\"form-group\">\n                            <label>Email</label>\n                            <input value={email} onChange={handleChange(\"email\")} type=\"email\" className=\"form-control\"/>\n                        </div>\n                        <button onClick={onSubmitEmail} className=\"btn btn-success btn-block\">Send OTP</button>\n                    </form>\n                </div>\n            </div>\n        );\n    }\n\n    const otpVerifyForm= ()=>{\n        return (\n            <div className=\"row\">\n                <div className=\"col-md-6 text-left offset-sm-3\">\n                    <form>\n                        <div className=\"form-group\">\n                            <label>OTP</label>\n                            <input value={otp} onClick={listen} onChange={handleChange(\"otp\")} type=\"text\" className=\"form-control\"/>\n                        </div>\n                        <button onClick={onSubmitOTP} className=\"btn btn-success btn-block mb-2\">Verify OTP</button>\n                        <button onClick={onResendOTP} className=\"btn btn-primary btn-block\">Resend OTP</button>\n                    </form>\n                </div>\n            </div>\n        );\n    }\n\n    const changePassForm= ()=>{\n        return (\n            <div className=\"row\">\n                <div className=\"col-md-6 text-left offset-sm-3\">\n                    <form>\n                        <div className=\"form-group\">\n                            <label>New Password</label>\n                            <input value={newpass} onClick={listen} onChange={handleChange(\"newpass\")} type=\"text\" className=\"form-control\"/>\n                        </div>\n                        <button onClick={onPassChange} className=\"btn btn-success btn-block\">Change Password</button>\n                    </form>\n                </div>\n            </div>\n        );\n    }\n\n    const onSubmitEmail=(event)=>{\n        event.preventDefault()\n        setValue({...values,error:false,isLoading:true})\n        fogortpass({email})\n        .then((responce)=>{\n            if(responce.err){\n                setValue({...values,error:responce.err,success:false,isLoading:false})\n            }else{\n                setValue({\n                    ...values,\n                    error:false,\n                    success:\"OTP Send To Your Email!\",\n                    otpSend:true,\n                    isLoading:false\n                });\n            }\n        }).catch((err)=>{\n            console.log('Failed to send forget reuest');\n        })\n    }\n\n    const onSubmitOTP=(event)=>{\n        event.preventDefault()\n        setValue({...values,error:false,success:false,isLoading:true})\n        veifyotp({email,otp})\n        .then((responce)=>{\n            if(responce.err){\n                setValue({...values,error:responce.err,isLoading:false})\n            }else{\n                setValue({\n                    ...values,\n                    error:\"\",\n                    success:\"OTP Varified!\",\n                    isLoading:false,\n                    otpVerified:true\n                })\n            }\n        })\n        .catch((err)=>{\n            console.log('Faild to send otp verify request');\n        })\n    }\n\n    const onResendOTP=(event)=>{\n        event.preventDefault()\n        setValue({...values,\n            email:\"\",\n            otp:\"\",\n            error:false,\n            success:false,\n            isLoading:false,\n            otpSend:false,\n            otpVerified:false\n        })\n    }\n\n    const onPassChange=(event)=>{\n        event.preventDefault()\n        setValue({...values,error:false,success:false,isLoading:true})\n        changepass({email,newpass},otp)\n        .then((responce)=>{\n            if(responce.err){\n                setValue({...values,error:responce.err,isLoading:false})\n            }else{\n                setValue({\n                    ...values,\n                    success:\"Your Password Change Successfully\",\n                    email:\"\",\n                    otp:\"\",\n                    newpass:\"\",\n                    error:false,\n                    isLoading:false,\n                    otpSend:false,\n                    otpVerified:false,\n                    didRedirect:true\n                })\n            }\n        }).catch((err)=>{\n            console.log('Failed to send password change request!');\n        })\n    }\n\n    return !otpVerified\n    ?!otpSend\n        ?(\n            <Base title=\"Forgot Password\">\n                {loadingMsg()}\n                {successMsg()}\n                {errorMsg()}\n                {sendOTPForm()}\n            </Base>\n        )\n        :(\n            <Base title=\"Forgot Password\">\n                {loadingMsg()}    \n                {successMsg()}\n                {errorMsg()}\n                {otpVerifyForm()}\n            </Base>\n        )\n    :(\n        <Base title=\"Forgot Password\">\n            {loadingMsg()}    \n            {successMsg()}\n            {errorMsg()}\n            {changePassForm()}\n            {performRedirect()}\n        </Base>\n    )\n}\n"]},"metadata":{},"sourceType":"module"}